---
- name: "Distro bootstrap configure"
  gather_facts: true
  # Password policy is technically not required for boot,
  # But it's quite nice to configure it for boot and therefore
  # enforce the required policies/configurations wanted for the first passwrod change
  tags: ["required_for_boot"]
  hosts:
    - archlinux.local
    - ubuntu.local
    - rpi5.local
  roles:
    - role: "hostname"
    - role: "network"
    - role: "user"
    - role: "ssh"
    - role: "password_policy"
  pre_tasks:
    - name: "Update package cache"
      become: true
      ansible.builtin.package:
        update_cache: true

- name: "Distro configure common roles"
  gather_facts: true
  hosts:
    - archlinux.local
    - ubuntu.local
    - rpi5.local
  roles:
    - role: "locales"
    - role: "timezone"
